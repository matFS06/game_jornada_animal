<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸŒ± Jogo dos Nutrientes ğŸŒ½</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(to bottom, #d0f0c0, #fff);
      font-family: 'Comic Sans MS', cursive, sans-serif;
      padding: 20px;
      background-image: url(nutrientes.png);
      background-size: cover;
      background-position: center;
      height: 100vh;
    }

    .quiz-box {
      max-width: 700px;
      margin: auto;
      background: #fff8e7;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 0 20px rgba(0, 100, 0, 0.2);
      border: 3px dashed #a3c586;
    }

    h3, h4 {
      color: #4e944f;
    }

    .vidas {
      color: #d62828;
      font-weight: bold;
    }

    .btn-option {
      margin-bottom: 10px;
      text-align: left;
      background-color: #d0ead2;
      border: 2px solid #4e944f;
      color: #333;
      font-weight: bold;
      transition: transform 0.2s, background-color 0.3s;
    }

    .btn-option:hover {
      background-color: #a3c586;
      transform: scale(1.02);
    }

    .btn-option:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    #explicacao {
      display: none;
      margin-top: 20px;
      text-align: center;
    }

    #explicacao img {
      max-width: 200px;
      margin-top: 10px;
      border-radius: 12px;
      border: 2px solid #4e944f;
    }

    .header-box {
      background-color: #a3c586;
      padding: 10px 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      color: #fff;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }

    .btn-success {
      background-color: #4e944f;
      border: none;
    }

    .btn-success:hover {
      background-color: #3c7d3c;
    }

    input.form-control {
      border: 2px solid #4e944f;
    }
  </style>
</head>
<body>
  <div class="quiz-box">
    <div class="header-box">ğŸŒ¿ MÃ³dulo dos Nutrientes ğŸ“</div>

    <div id="tela-nome">
      <h3>ğŸ‘©â€ğŸŒ¾ Digite seu nome para comeÃ§ar:</h3>
      <input type="text" id="nome-jogador" class="form-control mb-3" placeholder="Seu nome" />
      <button class="btn btn-success" onclick="iniciarJogo()">ComeÃ§ar</button>
    </div>

    <div id="jogo" style="display: none;">
      <div class="d-flex justify-content-between">
        <div><strong>ğŸ‘¤ Jogador:</strong> <span id="jogador"></span></div>
        <div><strong>â­ Pontos:</strong> <span id="pontos">0</span></div>
        <div><strong>â¤ï¸ Vidas:</strong> <span id="vidas" class="vidas">5</span></div>
      </div>
      <hr />
      <div>
        <h4 id="pista">ğŸ”</h4>
        <div id="opcoes" class="mt-3"></div>
        <div id="explicacao">
          <p id="texto-explicacao"></p>
          <img id="imagem-explicacao" src="" alt="Imagem do alimento">
          <br>
          <button class="btn btn-primary mt-3" onclick="proximaPergunta()">ğŸŒ± Continuar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Tela de ReinÃ­cio -->
  <div id="restart-container" class="container text-center" style="display: none; margin-top: 30px;">
    <h2>ğŸ‰ ParabÃ©ns! VocÃª completou todas as perguntas!</h2>
    <p class="mb-4">PontuaÃ§Ã£o final: <strong><span id="pontuacao-final"></span> pontos</strong></p>
    <button class="btn btn-success me-2" onclick="restartGame()">ğŸ”„ Jogar Novamente</button>
    <button class="btn btn-primary" onclick="goToNextModule()">â¡ï¸ PrÃ³ximo MÃ³dulo</button>
  </div>

  <script>
    const perguntas = [
      {
        pistas: [
          "1. Sou uma fruta tropical rica em potÃ¡ssio. (10 pts)",
          "2. Ajudo a prevenir cÃ¢imbras musculares. (7 pts)",
          "3. Tenho uma casca amarela e sou muito consumida no Brasil. (5 pts)"
        ],
        resposta: "Banana",
        opcoes: ["MaÃ§Ã£", "Banana", "Laranja", "Abacaxi", "MelÃ£o"],
        explicacao: "A banana Ã© rica em potÃ¡ssio e excelente para os mÃºsculos.",
        imagem: "banana.png"
      },
      {
        pistas: [
          "1. Sou verde, folhoso e cheio de ferro. (10 pts)",
          "2. Ajudo na prevenÃ§Ã£o da anemia. (7 pts)",
          "3. Sou muito usado em saladas e sucos detox. (5 pts)"
        ],
        resposta: "Espinafre",
        opcoes: ["Alface", "Couve", "Espinafre", "AgriÃ£o", "RÃºcula"],
        explicacao: "O espinafre Ã© uma excelente fonte de ferro e outros nutrientes.",
        imagem: "espinafre.png"
      },
      {
        pistas: [
          "1. Sou um tubÃ©rculo e fonte de energia. (10 pts)",
          "2. Sou rico em carboidratos e vitaminas do complexo B. (7 pts)",
          "3. Frito, cozido ou purÃª, estou sempre presente nas refeiÃ§Ãµes. (5 pts)"
        ],
        resposta: "Batata",
        opcoes: ["Inhame", "Batata", "Mandioquinha", "Cenoura", "CarÃ¡"],
        explicacao: "A batata Ã© rica em carboidratos e fornece energia rapidamente.",
        imagem: "batata.png"
      },
      {
        pistas: [
          "1. Sou uma leguminosa rica em proteÃ­nas vegetais. (10 pts)",
          "2. Sou muito usada em feijoadas e pratos brasileiros. (7 pts)",
          "3. Tenho uma casca escura e sou muito popular no Brasil. (5 pts)"
        ],
        resposta: "FeijÃ£o",
        opcoes: ["Lentilha", "GrÃ£o-de-bico", "FeijÃ£o", "Ervilha", "Soja"],
        explicacao: "O feijÃ£o Ã© fonte de proteÃ­na vegetal e ferro, essencial na dieta brasileira.",
        imagem: "feijao.png"
      },
      {
        pistas: [
          "1. Sou uma fruta cÃ­trica rica em vitamina C. (10 pts)",
          "2. Ajudar na imunidade Ã© comigo mesmo! (7 pts)",
          "3. Sou muito usada em sucos no cafÃ© da manhÃ£. (5 pts)"
        ],
        resposta: "Laranja",
        opcoes: ["LimÃ£o", "Tangerina", "Abacaxi", "Laranja", "Caju"],
        explicacao: "A laranja Ã© excelente fonte de vitamina C, fortalecendo o sistema imunolÃ³gico.",
        imagem: "laranja.png"
      },
      {
        pistas: [
          "1. Sou uma raiz rica em betacaroteno. (10 pts)",
          "2. Sou boa para a visÃ£o e a pele. (7 pts)",
          "3. Minha cor Ã© laranja vibrante! (5 pts)"
        ],
        resposta: "Cenoura",
        opcoes: ["AbÃ³bora", "Cenoura", "Mandioquinha", "Inhame", "Beterraba"],
        explicacao: "A cenoura Ã© rica em betacaroteno, essencial para a saÃºde dos olhos.",
        imagem: "cenoura.png"
      },
      {
        pistas: [
          "1. Sou um vegetal roxo e cheio de antioxidantes. (10 pts)",
          "2. Sou usado em saladas, sucos e atÃ© sobremesas. (7 pts)",
          "3. Posso ajudar na pressÃ£o e circulaÃ§Ã£o. (5 pts)"
        ],
        resposta: "Beterraba",
        opcoes: ["Uva", "Cenoura", "Beterraba", "Repolho Roxo", "Amora"],
        explicacao: "A beterraba Ã© rica em nitratos naturais que ajudam a regular a pressÃ£o arterial.",
        imagem: "beterraba.png"
      },
      {
        pistas: [
          "1. Sou um cereal integral muito nutritivo. (10 pts)",
          "2. Ajudo no funcionamento do intestino. (7 pts)",
          "3. Costumo ser consumido com iogurte ou frutas. (5 pts)"
        ],
        resposta: "Aveia",
        opcoes: ["Granola", "Farinha de trigo", "Centeio", "Aveia", "Quinoa"],
        explicacao: "A aveia Ã© rica em fibras e ideal para a saÃºde digestiva e controle de colesterol.",
        imagem: "aveia.png"
      }
    ];

    let indice = 0;
    let pontuacao = 0;
    let vidas = 5;
    let etapaPista = 0;
    let nome = "";
    let opcoesErradas = []; // ğŸ‘‰ NOVO: armazena opÃ§Ãµes erradas da pergunta atual

    function iniciarJogo() {
      nome = document.getElementById("nome-jogador").value;
      if (!nome) return alert("ğŸŒ¼ Digite seu nome para comeÃ§ar!");

      document.getElementById("tela-nome").style.display = "none";
      document.getElementById("jogo").style.display = "block";
      document.getElementById("jogador").textContent = nome;

      carregarPergunta();
    }

    function carregarPergunta() {
      const pergunta = perguntas[indice];
      document.getElementById("pista").textContent = pergunta.pistas[etapaPista];
      const opcoesContainer = document.getElementById("opcoes");
      opcoesContainer.innerHTML = "";
      document.getElementById("explicacao").style.display = "none";

      pergunta.opcoes.forEach(opcao => {
        const btn = document.createElement("button");
        btn.className = "btn btn-option w-100";
        btn.textContent = opcao;
        btn.disabled = opcoesErradas.includes(opcao); // ğŸ‘‰ NOVO: desabilita se jÃ¡ errou
        btn.onclick = () => verificarResposta(opcao);
        opcoesContainer.appendChild(btn);
      });
    }

    function verificarResposta(opcao) {
      const pergunta = perguntas[indice];

      if (opcao === pergunta.resposta) {
        const pontosGanhos = etapaPista === 0 ? 10 : etapaPista === 1 ? 7 : 5;
        pontuacao += pontosGanhos;
        document.getElementById("pontos").textContent = pontuacao;
        mostrarExplicacao(pergunta);
      } else {
        opcoesErradas.push(opcao); // ğŸ‘‰ NOVO: marca como errada
        etapaPista++;
        if (etapaPista >= 3) {
          vidas--;
          document.getElementById("vidas").textContent = vidas;
          mostrarExplicacao(pergunta);
          if (vidas <= 0) fimDeJogo();
        } else {
          carregarPergunta();
        }
      }
    }

    function mostrarExplicacao(pergunta) {
      document.getElementById("opcoes").innerHTML = "";
      document.getElementById("pista").textContent = `âœ… Resposta: ${pergunta.resposta}`;
      document.getElementById("texto-explicacao").textContent = pergunta.explicacao;
      document.getElementById("imagem-explicacao").src = pergunta.imagem;
      document.getElementById("explicacao").style.display = "block";
    }

    function proximaPergunta() {
      etapaPista = 0;
      opcoesErradas = [];
      indice++;
      if (indice < perguntas.length) {
        carregarPergunta();
      } else {
        // Mostrar tela de finalizaÃ§Ã£o personalizada
        document.getElementById("jogo").style.display = "none";
        document.getElementById("restart-container").style.display = "block";
        document.getElementById("pontuacao-final").textContent = pontuacao;
      }
    }

    function restartGame() {
      // Reiniciar o jogo do zero
      indice = 0;
      pontuacao = 0;
      vidas = 5;
      etapaPista = 0;
      opcoesErradas = [];

      // Esconde a tela final e mostra o jogo novamente
      document.getElementById("restart-container").style.display = "none";
      document.getElementById("jogo").style.display = "block";
      document.getElementById("pontos").textContent = pontuacao;
      document.getElementById("vidas").textContent = vidas;

      carregarPergunta();
    }

    function goToNextModule() {
      window.location.href = "proximo.html"; // Troque para a URL real do prÃ³ximo mÃ³dulo
    }

  </script>
</body>
</html>
