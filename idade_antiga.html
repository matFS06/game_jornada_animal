<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Jogo de Correspond√™ncia: Civiliza√ß√µes Antigas</title>
  <style>
    body {
      font-family: 'Comic Sans MS', sans-serif;
      background-image: url('background.png');
      color: black;
      text-align: center;
      margin: 0;
    }

    .container {
      max-width: 700px;
      margin: 30px auto;
      background: #eecac4d0;
      padding: 25px;
      border-radius: 15px;
      border: 4px solid #a1887f;
    }

    #nickname-card {
      margin-bottom: 20px;
    }

    #score-card {
      background-color: #d7ccc8;
      color: black;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 10px;
      border: 2px solid #4e342e;
    }

    .items-container {
      display: flex;
      justify-content: space-around;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .item, .target {
      width: 120px;
      height: 150px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      margin: 10px;
      border: 2px solid #4e342e;
      border-radius: 10px;
      background-color: #f1f1f1;
      cursor: pointer;
      position: relative;
    }

    .drag-item {
      cursor: grab;
      transition: opacity 0.2s ease;
    }

    .drag-item:active {
      cursor: grabbing;
      opacity: 0.6; /* Efeito de "carregando" enquanto a imagem est√° sendo movida */
    }

    .target {
      background-color: #c8e6c9;
      text-align: center;
      font-weight: bold;
      font-size: 16px;
      min-height: 100px;
    }

    #explanation {
      margin-top: 20px;
      background-color: #efebe9;
      color: #3e2723;
      padding: 15px;
      border-radius: 10px;
      display: none;
      text-align: left;
    }

    button {
      padding: 10px 20px;
      margin: 15px 10px 0;
      border: none;
      border-radius: 5px;
      font-size: 14px;
      cursor: pointer;
    }

    #next-btn {
      background-color: #4CAF50;
      color: white;
      margin-top: 20px;
      width: 200px;
      margin-left: auto;
      margin-right: auto;
    }

    #final-screen {
      display: none;
    }

    #player-name {
      font-size: 18px;
      padding: 8px;
      width: 80%;
      max-width: 300px;
      margin-bottom: 20px;
    }

    .item-name {
      font-weight: bold;
      font-size: 14px;
      margin-top: 10px;
      text-align: center;
    }

    .item img {
      max-width: 100%;
      max-height: 120px;
      object-fit: contain;
    }
  </style>
</head>
<body>

  <div class="container" id="start-screen">
    <h2>Jogo das Civiliza√ß√µes Antigas</h2>
    <img src="logo_civilizacoes.png" alt="Logo Civiliza√ß√µes" style="max-width: 250px; margin-bottom: 20px; border-radius: 10%;"><br>
    <input type="text" id="player-name" placeholder="Digite seu nome"><br>
    <button onclick="startGame()">Iniciar</button>
  </div>

  <div class="container" id="game-container" style="display: none;">
    <div id="nickname-card">
      <strong>Jogador:</strong> <span id="player-display"></span> |
      <strong>Pontua√ß√£o:</strong> <span id="score">0</span>/90
    </div>

    <h3>Arraste as imagens para as civiliza√ß√µes corretas</h3>

    <div class="items-container" id="items-container">
      <!-- Aqui ser√£o os itens arrast√°veis -->
    </div>

    <div class="items-container" id="targets-container">
      <!-- Aqui ser√£o as caixas de destino -->
    </div>

    <button id="next-btn" onclick="nextPhase()">Pr√≥xima Fase</button>

    <div id="explanation"></div>
  </div>

  <div id="final-screen" class="container text-center" style="display: none;">
    <h2>üéâ Parab√©ns, <span id="final-player-name"></span>!</h2>
    <p>Voc√™ completou o jogo com <strong><span id="final-score"></span> ponto(s)</strong>!</p>
    <button onclick="restartGame()">üîÑ Jogar Novamente</button>
  </div>

  <script>
    const phases = [
      {
        items: [
          { name: "C√≥digos de Hamurabi", image: "codigo_hamurabi.jpg", civilization: "Mesopot√¢mia", explanation: "O c√≥digo de Hamurabi foi uma das primeiras leis escritas, que estabeleciam um sistema legal para a Mesopot√¢mia." },
          { name: "Pir√¢mides de Giz√©", image: "piramides_gize.jpg", civilization: "Egito", explanation: "As pir√¢mides de Giz√© s√£o uma das Sete Maravilhas do Mundo Antigo, usadas como tumbas para os fara√≥s eg√≠pcios." },
          { name: "Filosofia de S√≥crates", image: "filosofia_socrates.jpg", civilization: "Gr√©cia", explanation: "S√≥crates √© um dos fil√≥sofos mais importantes da Gr√©cia, conhecido por seu m√©todo de questionamento e busca pela verdade." }
        ],
        targets: ["Mesopot√¢mia", "Egito", "Gr√©cia"]
      },
      {
        items: [
          { name: "Rios Tigre e Eufrates", image: "rios_tigre_eufrates.jpg", civilization: "Mesopot√¢mia", explanation: "Os rios Tigre e Eufrates proporcionaram as condi√ß√µes ideais para o surgimento das primeiras civiliza√ß√µes." },
          { name: "M√∫mias Eg√≠pcias", image: "mumia_egipcia.jpg", civilization: "Egito", explanation: "A mumifica√ß√£o era um ritual importante no Egito, acreditando-se que preservava o corpo para a vida ap√≥s a morte." },
          { name: "Teatro Grego", image: "teatro_grego.jpg", civilization: "Gr√©cia", explanation: "O teatro grego foi uma das primeiras formas de express√£o art√≠stica em grande escala e influenciou toda a cultura ocidental." }
        ],
        targets: ["Mesopot√¢mia", "Egito", "Gr√©cia"]
      },
      {
        items: [
          { name: "Imp√©rio Ac√°dio", image: "imperio_acadio.jpg", civilization: "Mesopot√¢mia", explanation: "O Imp√©rio Ac√°dio, fundado por Sarg√£o da Ac√°dia, foi o primeiro imp√©rio multirracial da hist√≥ria, unificando as cidades-estado da Mesopot√¢mia sob um √∫nico governo." },
          { name: "Esfinge", image: "esfinge.jpg", civilization: "Egito", explanation: "A Esfinge √© uma est√°tua monumental que simboliza o poder do fara√≥ e a rela√ß√£o com os deuses." },
          { name: "Acr√≥pole de Atenas", image: "acropole_atenas.jpg", civilization: "Gr√©cia", explanation: "A Acr√≥pole de Atenas √© um conjunto de monumentos antigos, incluindo o Parthenon, que simboliza a gl√≥ria da civiliza√ß√£o grega cl√°ssica." }
        ],
        targets: ["Mesopot√¢mia", "Egito", "Gr√©cia"]
      },
      {
        items: [
          { name: "Zigurate", image: "zigurate.jpg", civilization: "Mesopot√¢mia", explanation: "Os zigurates eram templos constru√≠dos nas cidades da Mesopot√¢mia, dedicados aos deuses." },
          { name: "Cle√≥patra", image: "cleopatra.jpg", civilization: "Egito", explanation: "Cle√≥patra VII foi a √∫ltima rainha do Egito, famosa por sua intelig√™ncia e por seus encontros com J√∫lio C√©sar e Marco Ant√¥nio." },
          { name: "Pante√£o Grego", image: "panteao_grego.jpg", civilization: "Gr√©cia", explanation: "O Pante√£o Grego √© composto pelos deuses da mitologia grega, como Zeus, Atena e Apolo." }
        ],
        targets: ["Mesopot√¢mia", "Egito", "Gr√©cia"]
      },
      {
        items: [
          { name: "Escrita Cuneiforme", image: "escrita_cuneiforme.jpg", civilization: "Mesopot√¢mia", explanation: "A escrita cuneiforme √© uma das primeiras formas de escrita desenvolvidas na Mesopot√¢mia." },
          { name: "Rio Nilo", image: "rio_nilo.jpg", civilization: "Egito", explanation: "O Rio Nilo foi essencial para a sobreviv√™ncia e o desenvolvimento do Egito Antigo, fornecendo √°gua, transporte e fertilizando as terras agr√≠colas." },
          { name: "Democracia Grega", image: "democracia_grega.jpg", civilization: "Gr√©cia", explanation: "A Gr√©cia Antiga √© o ber√ßo da democracia, onde cidad√£os podiam participar diretamente das decis√µes do governo." }
        ],
        targets: ["Mesopot√¢mia", "Egito", "Gr√©cia"]
      },
      {
        items: [
          { name: "A Lei de Ur-Nammu", image: "lei_ur_nammu.jpg", civilization: "Mesopot√¢mia", explanation: "A Lei de Ur-Nammu √© um dos primeiros c√≥digos legais, prefigurando as leis de Hamurabi." },
          { name: "O Livro dos Mortos", image: "livro_mortos.jpg", civilization: "Egito", explanation: "O Livro dos Mortos era um conjunto de textos usados pelos eg√≠pcios para guiar as almas para a vida ap√≥s a morte." },
          { name: "A Rep√∫blica de Plat√£o", image: "republica_platao.jpg", civilization: "Gr√©cia", explanation: "A 'Rep√∫blica' de Plat√£o √© uma obra filos√≥fica que discute justi√ßa, pol√≠tica e a natureza do governo ideal." }
        ],
        targets: ["Mesopot√¢mia", "Egito", "Gr√©cia"]
      }
    ];

    let currentPhaseIndex = 0;
    let playerName = "";
    let score = 0;
    let correctItemsCount = 0;

    let draggedItem = null;
    let draggedItemElement = null;
    let draggedTarget = null;

    function startGame() {
      playerName = document.getElementById("player-name").value;
      if (playerName.trim() === "") {
        alert("Por favor, insira seu nome!");
        return;
      }

      document.getElementById("player-display").innerText = playerName;
      document.getElementById("start-screen").style.display = "none";
      document.getElementById("game-container").style.display = "block";

      loadPhase();
    }

    function loadPhase() {
      const phase = phases[currentPhaseIndex];
      shuffleArray(phase.items);
      correctItemsCount = 0;

      const itemsContainer = document.getElementById("items-container");
      itemsContainer.innerHTML = "";
      const targetsContainer = document.getElementById("targets-container");
      targetsContainer.innerHTML = "";

      phase.items.forEach(item => {
        const itemDiv = document.createElement("div");
        itemDiv.className = "item";
        itemDiv.dataset.civilization = item.civilization;
        itemDiv.innerHTML = `
          <div class="item-name">${item.name}</div>
          <img src="${item.image}" alt="${item.name}" class="drag-item"/>
        `;
        itemDiv.addEventListener("mousedown", (e) => handleMouseDown(e, item));
        itemDiv.addEventListener("touchstart", (e) => handleTouchStart(e, item));
        itemsContainer.appendChild(itemDiv);
      });

      phase.targets.forEach(target => {
        const targetDiv = document.createElement("div");
        targetDiv.className = "target";
        targetDiv.innerText = target;
        targetDiv.addEventListener("dragover", (e) => e.preventDefault());
        targetDiv.addEventListener("drop", (e) => handleDrop(e, target));
        targetsContainer.appendChild(targetDiv);
      });

      document.getElementById("next-btn").disabled = true;
      document.getElementById("next-btn").style.backgroundColor = "#bdbdbd";  // Bot√£o desabilitado
      document.getElementById("next-btn").style.pointerEvents = "none";
      document.getElementById("explanation").style.display = "none";
    }

    function handleMouseDown(event, item) {
      event.preventDefault();
      draggedItem = item;
      draggedItemElement = event.target;
      draggedTarget = null;

      draggedItemElement.style.opacity = 0.6; // Adiciona efeito visual de "carregando"
      document.addEventListener("mousemove", onMouseMove);
      document.addEventListener("mouseup", onMouseUp);
    }

    function onMouseMove(event) {
      draggedItemElement.style.left = event.pageX - draggedItemElement.offsetWidth / 2 + "px";
      draggedItemElement.style.top = event.pageY - draggedItemElement.offsetHeight / 2 + "px";
    }

    function onMouseUp(event) {
      document.removeEventListener("mousemove", onMouseMove);
      document.removeEventListener("mouseup", onMouseUp);
      draggedItemElement.style.opacity = 1; // Restaura a opacidade ap√≥s soltar

      const targetArea = document.elementFromPoint(event.clientX, event.clientY);
      handleDropInTarget(targetArea);
    }

    function handleTouchStart(event, item) {
      event.preventDefault();
      draggedItem = item;
      draggedItemElement = event.target;
      draggedTarget = null;

      draggedItemElement.style.opacity = 0.6; // Efeito de "carregando"
      document.addEventListener("touchmove", onTouchMove);
      document.addEventListener("touchend", onTouchEnd);
    }

    function onTouchMove(event) {
      draggedItemElement.style.left = event.touches[0].pageX - draggedItemElement.offsetWidth / 2 + "px";
      draggedItemElement.style.top = event.touches[0].pageY - draggedItemElement.offsetHeight / 2 + "px";
    }

    function onTouchEnd(event) {
      event.preventDefault();
      draggedItemElement.style.opacity = 1; // Restaura a opacidade ap√≥s soltar

      const targetArea = document.elementFromPoint(event.changedTouches[0].pageX, event.changedTouches[0].pageY);
      handleDropInTarget(targetArea);
    }

    function handleDropInTarget(targetArea) {
      if (targetArea && targetArea.classList.contains("target")) {
        draggedTarget = targetArea;

        if (draggedItem.civilization === draggedTarget.innerText) {
          draggedTarget.style.backgroundColor = "#A5D68D"; // Verde de sucesso
          draggedItemElement.style.backgroundColor = "#A5D68D"; // Verde
          score += 5;
          correctItemsCount++;
          showExplanation(draggedItem.explanation, true);
        } else {
          draggedTarget.style.backgroundColor = "#FFCDD2"; // Vermelho de erro
          draggedItemElement.style.backgroundColor = "#FFCDD2"; // Vermelho
          showExplanation("Ops, voc√™ se enganou. Tente novamente.", false);
        }
      }
      checkPhaseCompletion();
    }

    function showExplanation(explanation, correct) {
      const explanationDiv = document.getElementById("explanation");
      explanationDiv.innerHTML = explanation;
      explanationDiv.style.display = "block";
    }

    function checkPhaseCompletion() {
      if (correctItemsCount === phases[currentPhaseIndex].items.length) {
        document.getElementById("next-btn").disabled = false;
        document.getElementById("next-btn").style.backgroundColor = "#4CAF50";
        document.getElementById("next-btn").style.pointerEvents = "auto";
      }
    }

    function nextPhase() {
      if (correctItemsCount === phases[currentPhaseIndex].items.length) {
        currentPhaseIndex++;
        if (currentPhaseIndex < phases.length) {
          loadPhase();
        } else {
          showFinalScreen();
        }
      }
    }

    function showFinalScreen() {
      document.getElementById("game-container").style.display = "none";
      document.getElementById("final-screen").style.display = "block";
      document.getElementById("final-player-name").innerText = playerName;
      document.getElementById("final-score").innerText = score;
    }

    function restartGame() {
      document.getElementById("final-screen").style.display = "none";
      document.getElementById("start-screen").style.display = "block";
      score = 0;
      currentPhaseIndex = 0;
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }
  </script>
</body>
</html>
