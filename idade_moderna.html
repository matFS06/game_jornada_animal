<!DOCTYPE html>  
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Idade Moderna ‚Äì Linha do Tempo</title>
  <style>
    body {
      font-family: 'Garamond', serif;
      background-image: url('papel_antigo.jpg');
      background-size: cover;
      background-attachment: fixed;
      background-color: #fdf6e3;
      color: #1a1a1a;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    .container {
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      background-color: rgba(255, 255, 255, 0.9);
      border-radius: 10px;
      border: 2px solid #a77d2f;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .btn {
      padding: 12px 24px;
      font-size: 18px;
      background-color: #a77d2f;
      color: white;
      border: 2px solid #d4af37;
      border-radius: 6px;
      cursor: pointer;
      margin: 10px;
      font-family: 'Garamond', serif;
    }

    input[type="text"] {
      padding: 10px;
      font-size: 16px;
      width: 70%;
      border: 1px solid #a77d2f;
      border-radius: 5px;
    }

    .scoreboard {
      display: flex;
      justify-content: center;
      gap: 20px;
      background-color: #fff7e6;
      padding: 15px;
      border-radius: 10px;
      font-weight: bold;
      margin-bottom: 20px;
      border: 2px solid #d4af37;
    }

    .timeline, .drop-zone {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      padding: 10px;
    }

    .event, .drop-slot {
      width: 180px;
      padding: 10px;
      border-radius: 6px;
      font-weight: bold;
      margin: 5px;
      touch-action: manipulation;
    }

    .event {
      background-color: #edd9a3;
      cursor: pointer;
    }

    .drop-slot {
      min-height: 60px;
      background-color: #fff3c4;
      border: 2px dashed #a77d2f;
      line-height: 1.2;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 5px;
      word-wrap: break-word;
      overflow: hidden;
      border-radius: 6px;
    }


    .correct {
      background-color: #a8e6a3 !important;
    }

    .wrong {
      background-color: #f7a9a9 !important;
    }
  </style>
</head>
<body>

<div id="start-screen" class="container">
  <h2>üß≠ Jornada pela Idade Moderna</h2>
  <img src="logo_idade_moderna.png" style="max-width: 200px; margin-bottom: 20px; border-radius: 10%;" />
  <br>
  <input type="text" id="player-name" placeholder="Digite seu nome">
  <br>
  <button class="btn" onclick="startGame()">Iniciar</button>
</div>

<div id="scoreboard" class="scoreboard" style="display: none;">
  <span id="player-display">Jogador:</span>
  <span id="score">Pontos: 0</span>
  <span id="lives">Vidas: 5</span>
</div>

<div id="game-screen" class="container" style="display: none;">
  <h2 id="phase-title">Arraste os eventos para a ordem correta</h2>
  <div id="event-list" class="timeline"></div>
  <div id="drop-zone" class="drop-zone"></div>
  <button class="btn" onclick="checkOrder()">Verificar</button>
</div>

<div id="end-screen" class="container" style="display: none;">
  <h2>üéâ Parab√©ns, <span id="final-player-name"></span>!</h2>
  <p>Voc√™ terminou com <strong><span id="final-score"></span> ponto(s)</strong>!</p>
  <button class="btn" onclick="location.reload()">üîÑ Jogar Novamente</button>
  <button class="btn" onclick="goToNextModule()">‚û°Ô∏è Pr√≥ximo M√≥dulo</button>
</div>

<script>
  let playerName = '';
  let score = 0;
  let lives = 5;
  let round = 0;
  let selectedItem = null;

  const allPhases = [
    {
      title: '1Ô∏è‚É£ Grandes Descobertas: Era das Expans√µes Mar√≠timas',
      events: [
        { year: 1453, text: 'Queda de Constantinopla' },
        { year: 1488, text: 'Bartolomeu Dias dobra o Cabo da Boa Esperan√ßa' },
        { year: 1492, text: 'Crist√≥v√£o Colombo chega √† Am√©rica' },
        { year: 1498, text: 'Vasco da Gama chega √†s √çndias' }
      ]
    },
    {
      title: '2Ô∏è‚É£ Mudan√ßas Religiosas: Reforma e Contrarreforma',
      events: [
        { year: 1517, text: 'Lutero publica as 95 teses' },
        { year: 1521, text: 'Lutero √© excomungado' },
        { year: 1545, text: 'Conc√≠lio de Trento inicia' },
        { year: 1540, text: 'Funda√ß√£o da Companhia de Jesus' }
      ]
    },
    {
      title: '3Ô∏è‚É£ O Saber se Revoluciona: Ci√™ncia Moderna',
      events: [
        { year: 1543, text: 'Cop√©rnico publica teoria helioc√™ntrica' },
        { year: 1609, text: 'Galileu aperfei√ßoa o telesc√≥pio' },
        { year: 1610, text: 'Descoberta das luas de J√∫piter' },
        { year: 1687, text: 'Newton publica as Leis da F√≠sica' }
      ]
    },
    {
      title: '4Ô∏è‚É£ Ideias Iluminando o Mundo: O S√©culo das Luzes',
      events: [
        { year: 1690, text: 'Locke publica "Segundo Tratado sobre o Governo"' },
        { year: 1748, text: 'Montesquieu publica "O Esp√≠rito das Leis"' },
        { year: 1751, text: 'Primeiro volume da Enciclop√©dia' },
        { year: 1762, text: 'Rousseau publica "O Contrato Social"' }
      ]
    },
    {
      title: '5Ô∏è‚É£ Independ√™ncia em Movimento: EUA e Revolu√ß√£o Americana',
      events: [
        { year: 1765, text: 'Lei do Selo imposta √†s col√¥nias' },
        { year: 1773, text: 'Festa do Ch√° de Boston' },
        { year: 1776, text: 'Declara√ß√£o de Independ√™ncia dos EUA' },
        { year: 1787, text: 'Constitui√ß√£o dos EUA √© adotada' }
      ]
    },
    {
      title: '6Ô∏è‚É£ A Revolu√ß√£o Francesa: Liberdade, Igualdade, Fraternidade',
      events: [
        { year: 1789, text: 'Queda da Bastilha' },
        { year: 1791, text: 'Constitui√ß√£o Francesa' },
        { year: 1793, text: 'Execu√ß√£o de Lu√≠s XVI' },
        { year: 1799, text: 'Golpe de 18 de Brum√°rio por Napole√£o' }
      ]
    },
    {
      title: '7Ô∏è‚É£ Ascens√£o e Queda de Napole√£o Bonaparte',
      events: [
        { year: 1804, text: 'Napole√£o se torna imperador' },
        { year: 1812, text: 'Fracasso da campanha √† R√∫ssia' },
        { year: 1815, text: 'Batalha de Waterloo' },
        { year: 1821, text: 'Morte de Napole√£o' }
      ]
    },
    {
      title: '8Ô∏è‚É£ Novos Rumos: Independ√™ncia da Am√©rica Latina',
      events: [
        { year: 1810, text: 'In√≠cio dos movimentos de independ√™ncia' },
        { year: 1816, text: 'Independ√™ncia da Argentina' },
        { year: 1821, text: 'Independ√™ncia do M√©xico' },
        { year: 1822, text: 'Independ√™ncia do Brasil' }
      ]
    }
  ];

  function startGame() {
    const input = document.getElementById('player-name');
    playerName = input.value.trim();
    if (!playerName) return alert('Digite seu nome!');
    document.getElementById('player-display').textContent = `Jogador: ${playerName}`;
    document.getElementById('score').textContent = `Pontos: ${score}`;
    document.getElementById('lives').textContent = `Vidas: ${lives}`;
    document.getElementById('start-screen').style.display = 'none';
    document.getElementById('scoreboard').style.display = 'flex';
    document.getElementById('game-screen').style.display = 'block';
    startRound();
  }

  function startRound() {
    if (round >= allPhases.length) return endGame();
    const phase = allPhases[round];
    const currentEvents = [...phase.events].sort(() => Math.random() - 0.5);

    document.getElementById('phase-title').textContent = phase.title;

    const eventList = document.getElementById('event-list');
    const dropZone = document.getElementById('drop-zone');
    eventList.innerHTML = '';
    dropZone.innerHTML = '';
    selectedItem = null;

    currentEvents.forEach(event => {
      const div = document.createElement('div');
      div.className = 'event';
      div.textContent = event.text;
      div.dataset.year = event.year;

      div.addEventListener('click', () => {
        selectedItem = div;
        document.querySelectorAll('.event').forEach(e => e.style.border = 'none');
        div.style.border = '2px solid #333';
      });

      eventList.appendChild(div);
    });

    for (let i = 0; i < currentEvents.length; i++) {
      const slot = document.createElement('div');
      slot.className = 'drop-slot';

      slot.addEventListener('click', () => {
        if (slot.dataset.year) {
          const returnedDiv = document.createElement('div');
          returnedDiv.className = 'event';
          returnedDiv.textContent = slot.textContent;
          returnedDiv.dataset.year = slot.dataset.year;
          returnedDiv.addEventListener('click', () => {
            selectedItem = returnedDiv;
            document.querySelectorAll('.event').forEach(e => e.style.border = 'none');
            returnedDiv.style.border = '2px solid #333';
          });
          eventList.appendChild(returnedDiv);
          slot.textContent = '';
          delete slot.dataset.year;
          return;
        }

        if (selectedItem) {
          slot.textContent = selectedItem.textContent;
          slot.dataset.year = selectedItem.dataset.year;
          selectedItem.remove();
          selectedItem = null;
        }
      });

      dropZone.appendChild(slot);
    }
  }
  function checkOrder() {
    const slots = Array.from(document.querySelectorAll('.drop-slot'));
    if (slots.some(slot => !slot.dataset.year)) {
      alert('Complete todos os espa√ßos!');
      return;
    }

    const correctOrder = [...slots]
      .map(slot => ({ year: parseInt(slot.dataset.year), text: slot.textContent }))
      .sort((a, b) => a.year - b.year)
      .map(item => item.text);

    let pointsThisRound = 0;

    slots.forEach((slot, index) => {
      slot.classList.remove('correct', 'wrong');
      const currentText = slot.textContent;
      if (currentText === correctOrder[index]) {
        slot.classList.add('correct');
        pointsThisRound += 5;
      } else {
        slot.classList.add('wrong');
      }
    });

    score += pointsThisRound;
    if (pointsThisRound < slots.length * 5) {
      lives--;
    }

    document.getElementById('score').textContent = `Pontos: ${score}`;
    document.getElementById('lives').textContent = `Vidas: ${lives}`;

    setTimeout(() => {
      if (lives <= 0) return endGame();
      round++;
      startRound();
    }, 2000);
  }

  function endGame() {
    document.getElementById('game-screen').style.display = 'none';
    document.getElementById('scoreboard').style.display = 'none';
    document.getElementById('end-screen').style.display = 'block';
    document.getElementById('final-player-name').textContent = playerName;
    document.getElementById('final-score').textContent = score;
  }

  function goToNextModule() {
    alert('Indo para o pr√≥ximo m√≥dulo: Idade Contempor√¢nea!');
  }
</script>
</body>
</html>
